import sympy


class Euler35():
    def __init__(self):
        self.primes = [2, 3, 5]
        self.cyclic = list()
        self.primes = [2, 5, 7, 11, 13, 17, 19, 31, 37, 71, 73, 79, 97, 113, 131, 137, 139, 173, 179, 191, 193, 197, 199,
                       311, 313, 317, 331, 337, 373, 379, 397, 719, 733, 739, 773, 797, 911, 919, 937, 971, 977, 991, 997,
                       1117, 1171, 1193, 1319, 1373, 1399, 1733, 1777, 1913, 1931, 1933, 1973, 1979, 1993, 1997, 1999,
                       3119, 3137, 3191, 3313, 3319, 3331, 3371, 3373, 3391, 3719, 3733, 3739, 3779, 3793, 3797, 3911,
                       3917, 3919, 3931, 7177, 7193, 7331, 7333, 7393, 7717, 7793, 7919, 7933, 7937, 7993, 9133, 9137,
                       9173, 9199, 9311, 9319, 9337, 9371, 9377, 9391, 9397, 9719, 9733, 9739, 9791, 9931, 9973, 11113,
                       11117, 11119, 11131, 11171, 11173, 11177, 11197, 11311, 11317, 11393, 11399, 11717, 11719, 11731,
                       11777, 11779, 11933, 11939, 11971, 13171, 13177, 13313, 13331, 13337, 13339, 13397, 13399, 13711,
                       13799, 13913, 13931, 13933, 13997, 13999, 17117, 17137, 17191, 17317, 17333, 17377, 17393, 17713,
                       17737, 17791, 17911, 17939, 17971, 17977, 19139, 19319, 19333, 19373, 19379, 19391, 19717, 19739,
                       19777, 19793, 19913, 19919, 19937, 19973, 19979, 19991, 19993, 19997, 31139, 31177, 31193, 31319,
                       31333, 31337, 31379, 31391, 31393, 31397, 31771, 31793, 31799, 31973, 31991, 33113, 33119, 33179, 33191, 33199, 33311, 33317, 33331, 33377, 33391, 33713, 33739, 33773, 33791, 33797, 33911, 33931, 33937, 33997, 37117, 37139, 37171, 37199, 37313, 37337, 37339, 37379, 37397, 37717, 37799, 37991, 37993, 37997, 39113, 39119, 39133, 39139, 39191, 39199, 39313, 39317, 39371, 39373, 39397, 39719, 39733, 39779, 39791, 39799, 39937, 39971, 39979, 71119, 71171, 71191, 71317, 71333, 71339, 71399, 71711, 71713, 71719, 71777, 71917, 71933, 71971, 71993, 71999, 73133, 73331, 73379, 73771, 73939, 73973, 73999, 77137, 77171, 77191, 77317, 77339, 77377, 77711, 77713, 77719, 77731, 77773, 77797, 77933, 77977, 77999, 79111, 79133, 79139, 79193, 79319, 79333, 79337, 79379, 79393, 79397, 79399, 79777, 79939, 79973, 79979, 79997, 79999, 91139, 91193, 91199, 91331, 91373, 91393, 91397, 91711, 91733, 91771, 91939, 91997, 93113, 93131, 93133, 93139, 93179, 93199, 93319, 93337, 93371, 93377, 93719, 93739, 93911, 93913, 93937, 93971, 93979, 93997, 97117, 97171, 97177, 97373, 97379, 97397, 97711, 97771, 97777, 97919, 97931, 97973, 99119, 99131, 99133, 99137, 99139, 99173, 99191, 99317, 99371, 99377, 99391, 99397, 99713, 99719, 99733, 99793, 99971, 99991, 111119, 111191, 111317, 111337, 111373, 111731, 111733, 111773, 111779, 111791, 111799, 111913, 111919, 111973, 111977, 111997, 113111, 113117, 113131, 113171, 113173, 113177, 113371, 113717, 113719, 113731, 113777, 113779, 113797, 113933, 117119, 117133, 117191, 117193, 117319, 117331, 117371, 117373, 117731, 117773, 117779, 117797, 117911, 117917, 117937, 117973, 117977, 117979, 117991, 119131, 119173, 119179, 119191, 119311, 119737, 119771, 119773, 119797, 119971, 119993, 131111, 131113, 131171, 131311, 131317, 131371, 131711, 131713, 131731, 131771, 131777, 131779, 131797, 131933, 131939, 133117, 133319, 133337, 133379, 133391, 133711, 133717, 133733, 133919, 133979, 133993, 133999, 137117, 137119, 137131, 137177, 137191, 137197, 137339, 137393, 137399, 137713, 137737, 137771, 137777, 137791, 137911, 137933, 137993, 137999, 139133, 139177, 139199, 139313, 139333, 139339, 139393, 139397, 139739, 139939, 139991, 139999, 171131, 171179, 171317, 171713, 171719, 171733, 171793, 171799, 171917, 171937, 173137, 173177, 173191, 173713, 173773, 173777, 173779, 173917, 173933, 173977, 173993, 177113, 177131, 177173, 177319, 177337, 177379, 177739, 177791, 177797, 177913, 177917, 177979, 179111, 179119, 179173, 179317, 179393, 179717, 179719, 179737, 179779, 179917, 179939, 179999, 191119, 191137, 191173, 191339, 191717, 191773, 191791, 191911, 191977, 191999, 193133, 193139, 193337, 193373, 193379, 193393, 193771, 193793, 193799, 193937, 193939, 193979, 193993, 197117, 197137, 197311, 197339, 197371, 197711, 197713, 197773, 197779, 197933, 197971, 199193, 199313, 199337, 199373, 199379, 199399, 199739, 199777, 199799, 199931, 199933, 199999, 311111, 311137, 311173, 311177, 311197, 311371, 311393, 311711, 311713, 311737, 311791, 313133, 313331, 313333, 313373, 313399, 313711, 313717, 313739, 313777, 313931, 313933, 313979, 313991, 313993, 313997, 317171, 317179, 317197, 317333, 317371, 317399, 317711, 317717, 317731, 317771, 317773, 317777, 317797, 317971, 319117, 319133, 319313, 319339, 319391, 319399, 319733, 319919, 319931, 319937, 319973, 319993, 331171, 331319, 331333, 331337, 331339, 331391, 331399, 331711, 331739, 331777, 331937, 331973, 331997, 331999, 333131, 333139, 333197, 333331, 333337, 333397, 333713, 333719, 333737, 333779, 333791, 333793, 333911, 333973, 333997, 337313, 337339, 337397, 337793, 337919, 337973, 337999, 339137, 339139, 339173, 339331, 339373, 339799, 339991, 371131, 371177, 371179, 371191, 371311, 371333, 371339, 371719, 371737, 371779, 371797, 371939, 371971, 371999, 373171, 373193, 373199, 373339, 373379, 373393, 373717, 373777, 373937, 373999, 377137, 377171, 377173, 377197, 377339, 377371, 377393, 377711, 377717, 377737, 377771, 377779, 377911, 377999, 379133, 379177, 379199, 379319, 379333, 379391, 379397, 379399, 379777, 379913, 379931, 379979, 379993, 379997, 379999, 391117, 391133, 391177, 391199, 391331, 391337, 391373, 391379, 391393, 391397, 391399, 391711, 391717, 391733, 391739, 391939, 391999, 393137, 393191, 393311, 393331, 393373, 393377, 393713, 393739, 393779, 393797, 393919, 393931, 393977, 393997, 397337, 397373, 397379, 397799, 397939, 397973, 399131, 399137, 399173, 399197, 399379, 399391, 399719, 399731, 399739, 399793, 399911, 399913, 399937, 399979, 711131, 711133, 711173, 711317, 711371, 711397, 711713, 711731, 711793, 711913, 711937, 711973, 713117, 713171, 713177, 713191, 713311, 713399, 713737, 713771, 713917, 713939, 717113, 717133, 717139, 717191, 717317, 717331, 717397, 717719, 717797, 717917, 717919, 717979, 719119, 719177, 719179, 719197, 719333, 719377, 719393, 719713, 719717, 719731, 719773, 719779, 719791, 719911, 731113, 731117, 731173, 731191, 731333, 731711, 731713, 731719, 731737, 731779, 731911, 731933, 731999, 733111, 733133, 733177, 733331, 733333, 733339, 733373, 733391, 733393, 733399, 733793, 733919, 733937, 733939, 733973, 733991, 737111, 737119, 737131, 737179, 737339, 737717, 737719, 737773, 737797, 737999, 739111, 739117, 739171, 739199, 739331, 739337, 739373, 739379, 739391, 739393, 739397, 739399, 739771, 739777, 739799, 739931, 771179, 771739, 771917, 771937, 771971, 771973, 771997, 773117, 773317, 773371, 773393, 773713, 773719, 773777, 773779, 773933, 773939, 773999, 777137, 777173, 777191, 777199, 777313, 777317, 777373, 777391, 777731, 777737, 777911, 777919, 777977, 777979, 779111, 779131, 779137, 779173, 779377, 779731, 779771, 779791, 779797, 779939, 779971, 779993, 791111, 791117, 791137, 791191, 791311, 791317, 791377, 791773, 791797, 791933, 791971, 791993, 793139, 793333, 793337, 793379, 793399, 793711, 793717, 793733, 793739, 793777, 793931, 793939, 793979, 793999, 797119, 797131, 797171, 797311, 797333, 797399, 797711, 797773, 797911, 797917, 797933, 797977, 799171, 799313, 799333, 799739, 799979, 799991, 799993, 799999, 911111, 911171, 911173, 911179, 911311, 911371, 911719, 911737, 911773, 911777, 911917, 913139, 913177, 913331, 913337, 913373, 913397, 913739, 913771, 913799, 913933, 913999, 917113, 917117, 917173, 917179, 917317, 917333, 917713, 917737, 917771, 917773, 917971, 917993, 919111, 919313, 919319, 919337, 919393, 919799, 919913, 919937, 919939, 919979, 931193, 931199, 931313, 931319, 931739, 931913, 931933, 931999, 933173, 933199, 933313, 933319, 933397, 933739, 933797, 933931, 933973, 933979, 937171, 937331, 937337, 937373, 937379, 937777, 937919, 937991, 939119, 939179, 939193, 939317, 939373, 939377, 939391, 939713, 939737, 939739, 939773, 939791, 939793, 939931, 939971, 939973, 939997, 971111, 971171, 971177, 971197, 971339, 971371, 971713, 971917, 971933, 971939, 971977, 973177, 973331, 973333, 973373, 973397, 973919, 977191, 977719, 977791, 977971, 979117, 979171, 979177, 979313, 979333, 979337, 979373, 979379, 979717, 979919, 991171, 991313, 991717, 991733, 991777, 991931, 991973, 991979, 991999, 993137, 993197, 993199, 993319, 993397, 993779, 993793, 993913, 993919, 993977, 993997, 997111, 997319, 997333, 997379, 997391, 997739, 997793, 997933, 997973, 997991, 999133, 999199, 999331, 999371, 999377, 999773, 999917, 999931, 999979]

    def produce_1379_primes(self):
        p = 5
        bad = set(list('024568'))
        while p < 1000000:
            p = sympy.nextprime(p)
            s = set(list(str(p)))
            if s.intersection(bad) == set():
                yield p
    def rotate(self, n):
        nn = list(str(n))
        return int(''.join([nn[-1]]+nn[:-1]))

if __name__ == '__main__':
    e = Euler35()
    #for i in e.produce_1379_primes():
    #    e.primes.append(i)
    print(e.primes)
    for i in e.primes:
        if len(str(i)) == 1:
            e.cyclic.append(i)
        else:
            t = True
            p = i
            for j in range(len(str(i))-1):
                p = e.rotate(p)
                if not p in e.primes:
                    t = False
                    break
            if t:
                e.cyclic.append(i)

    print(e.cyclic)
    print(len(e.cyclic))